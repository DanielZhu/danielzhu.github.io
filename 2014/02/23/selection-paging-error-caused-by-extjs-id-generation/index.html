<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Selection &amp; Paging Error caused by ExtJS ID Generation | Xiaodan&#39;s Everything</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="ExtJS中，Ext.data.Store是用来进行数据交换和交互的Standard Middleware，无论是Grid还是ComboBox，都是通过它实现数据读取、类型转换、排序分页和搜索等操作的。Ext.data.Store中有一个Ext.data.Record数组，所有数据都存放在这些Ext.data. Record实例中，为后面的读取和修改操作做准备。
在实际使用过程中，发现了一个问题，">
<meta property="og:type" content="article">
<meta property="og:title" content="Selection & Paging Error caused by ExtJS ID Generation">
<meta property="og:url" content="http://blog.staydan.com/2014/02/23/selection-paging-error-caused-by-extjs-id-generation/index.html">
<meta property="og:site_name" content="Xiaodan's Everything">
<meta property="og:description" content="ExtJS中，Ext.data.Store是用来进行数据交换和交互的Standard Middleware，无论是Grid还是ComboBox，都是通过它实现数据读取、类型转换、排序分页和搜索等操作的。Ext.data.Store中有一个Ext.data.Record数组，所有数据都存放在这些Ext.data. Record实例中，为后面的读取和修改操作做准备。
在实际使用过程中，发现了一个问题，">
<meta property="og:image" content="https://farm3.staticflickr.com/2925/13943147482_b5017a659a_o.png">
<meta property="og:updated_time" content="2015-06-19T01:57:18.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Selection & Paging Error caused by ExtJS ID Generation">
<meta name="twitter:description" content="ExtJS中，Ext.data.Store是用来进行数据交换和交互的Standard Middleware，无论是Grid还是ComboBox，都是通过它实现数据读取、类型转换、排序分页和搜索等操作的。Ext.data.Store中有一个Ext.data.Record数组，所有数据都存放在这些Ext.data. Record实例中，为后面的读取和修改操作做准备。
在实际使用过程中，发现了一个问题，">
  
  
  <script src="http://www.staydan.com/libs/jQuery/2.0.3/jquery-2.0.3.min.js"></script>
  <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

</head>
<body>
  <div class="container">
    <div class="wrapper">
      <header class="site-header">
  <div id="header-title" class="inner">
    <h1>
      <a href="/" title="Xiaodan's Everything">Xiaodan's Everything</a>
    </h1>
    
      <h4 id="subtitle-wrap">
        <a href="/" title="A foolish Programmer from Shanghai China">A foolish Programmer from Shanghai China</a>
      </h4>
    
  </div>
  <nav id="site-navs" class="">
	  <ul>
      <li class="header-underline"></li>
      
	      <li class="ease-animation"><a href="/" title="Home">Home</a></li>
	    
	      <li class="ease-animation"><a href="/archives" title="Archives">Archives</a></li>
	    
	      <li class="ease-animation"><a href="/about" title="About">About</a></li>
	    
	      <li class="ease-animation"><a href="/logs" title="Logs">Logs</a></li>
	    
	  </ul>
	  <div class="clearfix"></div>
	</nav>
</header>

      <div class="outer clearfix">
        <section id="main"><section class="tags-selection">
  <header class="tags-selection-header">
    <div class="tags-selection-header-label"><i class="fa fa-tag"></i>Tags</div>
  </header>
  <div id="tags-selection-panel">
  	<div class="tags-selection-navs" title="Sorted by the first English alphabet."><label class="tags-selection-nav active" navid="ad">A - D</label><label class="tags-selection-nav " navid="eh">E - H</label><label class="tags-selection-nav " navid="il">I - L</label><label class="tags-selection-nav " navid="mp">M - P</label><label class="tags-selection-nav " navid="qt">Q - T</label><label class="tags-selection-nav " navid="ux">U - X</label><label class="tags-selection-nav " navid="yz">Y - Z</label></div><div class="tags-selection-content"><div id="tags-selection-content-ad" class="tags-selection-content-part"><a href="/tags/Click Event"><span class="tag-instant" tagid="cik12capz000dcrwh7y9kejau">Click-Event<sup class="tag-selection-badge">1</sup></span></a><a href="/tags/Data Visualization"><span class="tag-instant" tagid="cik12caq2000jcrwhcko8k230">Data-Visualization<sup class="tag-selection-badge">1</sup></span></a><a href="/tags/docing"><span class="tag-instant" tagid="cik12caqd0014crwhe3ra46k9">docing<sup class="tag-selection-badge">1</sup></span></a><a href="/tags/document"><span class="tag-instant" tagid="cik12caqe0015crwhkd3bkws9">document<sup class="tag-selection-badge">1</sup></span></a><a href="/tags/CSS3"><span class="tag-instant" tagid="cik12caqh001dcrwh3ifp0fmn">CSS3<sup class="tag-selection-badge">1</sup></span></a><a href="/tags/Canvas"><span class="tag-instant" tagid="cik12caqn001pcrwh48dc0jld">Canvas<sup class="tag-selection-badge">1</sup></span></a><a href="/tags/Algorithm"><span class="tag-instant" tagid="cik12caqs0023crwhgp3ogvuh">Algorithm<sup class="tag-selection-badge">1</sup></span></a><a href="/tags/DateFormat"><span class="tag-instant" tagid="cik12carg003ecrwh7x0r7pfk">DateFormat<sup class="tag-selection-badge">1</sup></span></a><a href="/tags/CSS"><span class="tag-instant" tagid="cik12carj003kcrwhjvfb0go1">CSS<sup class="tag-selection-badge">1</sup></span></a><a href="/tags/AngularJS"><span class="tag-instant" tagid="cik12carp003tcrwh1cgu4pqs">AngularJS<sup class="tag-selection-badge">0</sup></span></a><a href="/tags/Bower"><span class="tag-instant" tagid="cik12carp003vcrwhuuf33s75">Bower<sup class="tag-selection-badge">0</sup></span></a></div><div id="tags-selection-content-eh" class="tags-selection-content-part"><a href="/tags/Hive Plot"><span class="tag-instant" tagid="cik12caq3000kcrwhohxqi02q">Hive-Plot<sup class="tag-selection-badge">1</sup></span></a><a href="/tags/HTML5"><span class="tag-instant" tagid="cik12caqh001ccrwhfb53plsw">HTML5<sup class="tag-selection-badge">2</sup></span></a><a href="/tags/History"><span class="tag-instant" tagid="cik12carm003pcrwh7nze94br">History<sup class="tag-selection-badge">0</sup></span></a><a href="/tags/Grunt"><span class="tag-instant" tagid="cik12carp003ucrwhbwi68yg8">Grunt<sup class="tag-selection-badge">0</sup></span></a></div><div id="tags-selection-content-il" class="tags-selection-content-part"><a href="/tags/JavaScript"><span class="tag-instant" tagid="cik12capt0004crwhbzrpm7ct">JavaScript<sup class="tag-selection-badge">1</sup></span></a><a href="/tags/jQuery"><span class="tag-instant" tagid="cik12capv0005crwhjy68a4cr">jQuery<sup class="tag-selection-badge">1</sup></span></a><a href="/tags/iScrollJs"><span class="tag-instant" tagid="cik12caq9000ycrwhi2bb7zr9">iScrollJs<sup class="tag-selection-badge">1</sup></span></a><a href="/tags/Jeju"><span class="tag-instant" tagid="cik12caqz002fcrwh40p8273n">Jeju<sup class="tag-selection-badge">1</sup></span></a><a href="/tags/laptop"><span class="tag-instant" tagid="cik12car3002mcrwhr9inucmy">laptop<sup class="tag-selection-badge">1</sup></span></a></div><div id="tags-selection-content-mp" class="tags-selection-content-part"><a href="/tags/Pull to refresh"><span class="tag-instant" tagid="cik12caq7000rcrwh8ba6qxa0">Pull-to-refresh<sup class="tag-selection-badge">1</sup></span></a><a href="/tags/Mask"><span class="tag-instant" tagid="cik12caqq001xcrwh9z8rxwcl">Mask<sup class="tag-selection-badge">1</sup></span></a><a href="/tags/Network"><span class="tag-instant" tagid="cik12car3002lcrwhfcol1lzn">Network<sup class="tag-selection-badge">1</sup></span></a><a href="/tags/PC"><span class="tag-instant" tagid="cik12car3002ocrwho1ii0fhh">PC<sup class="tag-selection-badge">1</sup></span></a><a href="/tags/Paging"><span class="tag-instant" tagid="cik12care0039crwhcz5jwgej">Paging<sup class="tag-selection-badge">1</sup></span></a></div><div id="tags-selection-content-qt" class="tags-selection-content-part"><a href="/tags/Sort"><span class="tag-instant" tagid="cik12caqs0022crwhpmxt5ron">Sort<sup class="tag-selection-badge">1</sup></span></a><a href="/tags/Team Building"><span class="tag-instant" tagid="cik12caqv0028crwh44gnfow1">Team-Building<sup class="tag-selection-badge">1</sup></span></a><a href="/tags/Tooltips"><span class="tag-instant" tagid="cik12car6002ucrwhcf7tmm7t">Tooltips<sup class="tag-selection-badge">1</sup></span></a><a href="/tags/Textfield"><span class="tag-instant" tagid="cik12car7002wcrwhaw02k8xy">Textfield<sup class="tag-selection-badge">1</sup></span></a><a href="/tags/Render"><span class="tag-instant" tagid="cik12car90031crwhplr2gwdz">Render<sup class="tag-selection-badge">1</sup></span></a><a href="/tags/Selection"><span class="tag-instant" tagid="cik12card0037crwhey3vwqrj">Selection<sup class="tag-selection-badge">1</sup></span></a><a href="/tags/RadioButton"><span class="tag-instant" tagid="cik12cari003jcrwhbr7linev">RadioButton<sup class="tag-selection-badge">1</sup></span></a></div><div id="tags-selection-content-ux" class="tags-selection-content-part"></div><div id="tags-selection-content-yz" class="tags-selection-content-part"></div></div>
  </div>
</section>
<article id="post-selection-paging-error-caused-by-extjs-id-generation"  class=" ease-animation">
  <header class="article-header">
    
        
  
    <div class="article-title" itemprop="name">
      Selection &amp; Paging Error caused by ExtJS ID Generation
    </div>
  

    
    <div class="article-meta sm-font">
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a><i class="fa fa-circle dot-separator"></i><a class="article-category-link" href="/categories/JavaScript/ExtJS/">ExtJS</a>
  </div>


      <a href="/2014/02/23/selection-paging-error-caused-by-extjs-id-generation/" class="article-updated">
  <time datetime="2014-02-22T16:00:00.000Z" itemprop="datePublished">14/02/23 00:02</time>
</a>
    </div>
  </header>
  <div class="article-entry">
  
    <p>ExtJS中，Ext.data.Store是用来进行数据交换和交互的Standard Middleware，无论是Grid还是ComboBox，都是通过它实现数据读取、类型转换、排序分页和搜索等操作的。<br>Ext.data.Store中有一个Ext.data.Record数组，所有数据都存放在这些Ext.data. Record实例中，为后面的读取和修改操作做准备。</p>
<p>在实际使用过程中，发现了一个问题，由于每个Record都会有一个唯一特定的id，并且如果每个Record的data中有一个属性为id，那这个Record就会取data中的id作为它的id，问题在于，如果data中的id是object类型，所有的这一切在ExtJS默认的逻辑中就会导致问题，无论这个object类型的id属性中有什么值，无论多么复杂，对应的Record都会生成一个包含[object Object]的id，而默认的前缀都是相同的，所以最后整个Store的record都是相同的id。<br><a id="more"></a><br>后果是什么。。。后果是如果你将这个Store绑定到某个Grid，你将永远无法选中你点的那一行，焦点永远会移动到第一行，原因就是出在那一模一样的id上。。。<br>具体的错误store请看下图：</p>
<p><a href="https://www.flickr.com/photos/123460474@N06/13943147482" title="grid-item-id-error-blur by Mengdan zhu, on Flickr" target="_blank" rel="external"><img src="https://farm3.staticflickr.com/2925/13943147482_b5017a659a_o.png" alt="grid-item-id-error-blur" title="grid-item-id-error-blur"></a></p>
<p>那解决这个问题的办法就显而易见，只要找到能给Store中的每个Record生成唯一id的方法就搞定了。</p>
<ol>
<li>在Model中定义 YourId</li>
<li>在第一步的Model中定义一个idgen来生成id</li>
</ol>
<p>如果正确使用idgen请参考官方的docs：</p>
<p><a href="http://docs-origin.sencha.com/extjs/4.2.2/#!/api/Ext.data.Model-cfg-idgen" target="_blank" rel="external">http://docs-origin.sencha.com/extjs/4.2.2/#!/api/Ext.data.Model-cfg-idgen</a></p>

  
  </div>
  <footer class="article-footer">
    <div class="article-footer-left">
      <a href="hexo_post.html#disqus" class="article-footer-left"><span class="comments"><i class="fa fa-comments"></i> 0 Comment</span></a>
      <i class="fa fa-circle dot-separator"></i>
    </div>
    
  <ul class="ease-animation sm-font tag-list"><li class="ease-animation sm-font tag-list-item"><a class="ease-animation sm-font tag-list-link" href="/tags/Paging/">Paging</a></li><li class="ease-animation sm-font tag-list-item"><a class="ease-animation sm-font tag-list-link" href="/tags/Selection/">Selection</a></li></ul>

    <div class="article-footer-right">
    
      <a href="hexo_post.html"><span class="save-pocket button sm-font ease-animation"><i class="fa fa-share"></i> Share</span></a>
    </div>
  </footer>
</article>

  
<div class="link-to-article"> 
  <div class="link-to-article-next">
  
    
      <div class="article-nav-date">
        2014-02-17
      </div>
      <div class="article-nav-title">
        <a href="/2014/02/17/date-format-in-extjs/" title="Date format in ExtJS">Date format in ExtJS</a>
      </div>
     
  
  </div>
  <div class="link-to-article-separator">
    <i class="fa fa-circle dot-separator"></i>
  </div>
  <div class="link-to-article-prev">
  
    
      <div class="article-nav-date">
        2014-02-23
      </div>
      <div class="article-nav-title">
        <a href="/2014/02/23/ghost-issue-in-enyo-scroller/" title="Ghost issue in Enyo.Scroller">Ghost issue in Enyo.Scroller</a>
      </div>
        
  
  </div>
</div>


</section>
      </div>
      <footer id="footer" class="site-footer">
	&copy; 2016 Daniel Zhu<br>
  <p>Theme by <a href="http://github.com/danielzhu" title="Line" target="_blank" rel="external">Line</a> Powered by <a href="http://hexo.io/" title="Hexo" target="_blank" rel="external">Hexo</a>
</footer>
    </div>
    


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>
<script src="/js/grouped_tag.js" type="text/javascript"></script>
  </div>
</body>
</html>
